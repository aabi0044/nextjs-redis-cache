{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\test\\\\Desktop\\\\Testing\\\\redis-cache-nextjs\\\\src\\\\pages\\\\index.jsx\",\n    _this = this;\n\nimport uuid from 'react-uuid';\n\nvar Home = function Home(_ref) {\n  var articles = _ref.articles;\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"HealthCare.gov Articles:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Language\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Article\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 11\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 9\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: articles && articles.length > 0 && articles.map(function (el) {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: el.lang\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 13\n            }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: 'https://www.healthcare.gov' + el.url,\n                target: \"_blank\",\n                children: el.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 48,\n                columnNumber: 15\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 13\n            }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: el.date\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 13\n            }, _this)]\n          }, uuid(), true, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 11\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 3\n  }, _this);\n};\n\n_c = Home;\nexport var __N_SSG = true;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/test/Desktop/Testing/redis-cache-nextjs/src/pages/index.jsx"],"names":["uuid","Home","articles","length","map","el","lang","url","title","date"],"mappings":";;;;;AACA,OAAOA,IAAP,MAAiB,YAAjB;;AA8BA,IAAMC,IAAI,GAAG,SAAPA,IAAO;AAAA,MAAGC,QAAH,QAAGA,QAAH;AAAA,sBACX;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE;AAAA,8BACE;AAAA,+BACE;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,eADF,eAQE;AAAA,kBACGA,QAAQ,IAAIA,QAAQ,CAACC,MAAT,GAAkB,CAA9B,IAAmCD,QAAQ,CAACE,GAAT,CAAa,UAACC,EAAD;AAAA,8BAC/C;AAAA,oCACE;AAAA,wBAAKA,EAAE,CAACC;AAAR;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAA,qCACE;AAAG,gBAAA,IAAI,EAAE,+BAA+BD,EAAE,CAACE,GAA3C;AAAgD,gBAAA,MAAM,EAAC,QAAvD;AAAA,0BAAiEF,EAAE,CAACG;AAApE;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBAFF,eAKE;AAAA,wBACGH,EAAE,CAACI;AADN;AAAA;AAAA;AAAA;AAAA,qBALF;AAAA,aAAST,IAAI,EAAb;AAAA;AAAA;AAAA;AAAA,mBAD+C;AAAA,SAAb;AADtC;AAAA;AAAA;AAAA;AAAA,eARF;AAAA;AAAA;AAAA;AAAA;AAAA,aAFF;AAAA;AAAA;AAAA;AAAA;AAAA,WADW;AAAA,CAAb;;KAAMC,I;;AA4BN,eAAeA,IAAf","sourcesContent":["import bluebird from 'bluebird';\r\nimport uuid from 'react-uuid';\r\nimport redis from 'redis';\r\n\r\nconst fetchData = async (url) => {\r\n  console.log('fetching...');\r\n  const query = await fetch(url);\r\n  return await query.json();\r\n};\r\n\r\nexport const getStaticProps = async () => {\r\n  bluebird.promisifyAll(redis.RedisClient.prototype);\r\n  const cache = redis.createClient();\r\n  let data = {};\r\n\r\n  await cache.existsAsync('articles').then(async reply => {\r\n    if (reply !== 1) { // cache miss, need to fetch\r\n      data = await fetchData('https://www.healthcare.gov/api/articles.json');\r\n      await cache.set('articles', JSON.stringify(data));\r\n    } else { // cache hit, will get data from redis\r\n      data = JSON.parse(await cache.getAsync('articles'));\r\n    }\r\n  });\r\n\r\n  return {\r\n    props: {\r\n      articles: data.articles,\r\n    },\r\n  };\r\n};\r\n\r\nconst Home = ({ articles }) => (\r\n  <article>\r\n    <h1>HealthCare.gov Articles:</h1>\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th>Language</th>\r\n          <th>Article</th>\r\n          <th>Date</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {articles && articles.length > 0 && articles.map((el) => (\r\n          <tr key={uuid()}>\r\n            <td>{el.lang}</td>\r\n            <td>\r\n              <a href={'https://www.healthcare.gov' + el.url} target=\"_blank\">{el.title}</a>\r\n            </td>\r\n            <td>\r\n              {el.date}\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  </article>\r\n);\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}